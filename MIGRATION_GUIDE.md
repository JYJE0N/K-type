# í•œê¸€ IME ì²˜ë¦¬ ê°œì„  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ðŸ“‹ ê°œìš”
ì´ ê°€ì´ë“œëŠ” ê¸°ì¡´ í•œê¸€ IME ì²˜ë¦¬ ë¡œì§ì„ ê°œì„ ëœ ë²„ì „ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ðŸŽ¯ ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. **ì´ì¤‘ ì²˜ë¦¬ ë¬¸ì œ í•´ê²°**
- **ë¬¸ì œ**: `handleInput`ê³¼ `handleCompositionEnd`ì—ì„œ ê°™ì€ ë¬¸ìžë¥¼ ë‘ ë²ˆ ì²˜ë¦¬
- **í•´ê²°**: 
  - ì¤‘ë³µ ê°ì§€ ë©”ì»¤ë‹ˆì¦˜ ì¶”ê°€ (`processedInputRef`, `lastProcessedChar/Time`)
  - 50ms ì´ë‚´ ë™ì¼ ë¬¸ìž ìž…ë ¥ ì‹œ ì¤‘ë³µìœ¼ë¡œ ê°„ì£¼í•˜ì—¬ ë¬´ì‹œ

### 2. **ìžëª¨ í•„í„°ë§ ì¤‘ì•™í™”**
- **ë¬¸ì œ**: ì—¬ëŸ¬ ê³³ì—ì„œ ìžëª¨ ë²”ìœ„ë¥¼ ì¤‘ë³µ ì²´í¬
- **í•´ê²°**: 
  - `src/utils/koreanIME.ts`ì— ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ìƒì„±
  - `isKoreanJamo()`, `isCompletedKorean()`, `filterKoreanJamo()` ì œê³µ

### 3. **ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ê°œì„ **
- **ë¬¸ì œ**: ë¸Œë¼ìš°ì €ë³„ CompositionEvent ë™ìž‘ ì°¨ì´
- **í•´ê²°**:
  - `IMEHandler` í´ëž˜ìŠ¤ë¡œ ìƒíƒœ ê´€ë¦¬ í†µí•©
  - `getBrowserType()` í•¨ìˆ˜ë¡œ ë¸Œë¼ìš°ì €ë³„ ì²˜ë¦¬ ë¶„ê¸°
  - Chrome, Firefox, Safari ê°ê° ìµœì í™”

### 4. **í…ŒìŠ¤íŠ¸ ì‹œìž‘ UX ê°œì„ **
- **ë¬¸ì œ**: Shift+Tabìœ¼ë¡œë§Œ ì‹œìž‘ ê°€ëŠ¥í•˜ì—¬ ì§ê´€ì ì´ì§€ ì•ŠìŒ
- **í•´ê²°**:
  - ì²« ë¬¸ìž ìž…ë ¥ ì‹œ ìžë™ ì‹œìž‘
  - í´ë¦­í•˜ë©´ ížŒíŠ¸ ìˆ¨ê¹€
  - Space, Enter, Tab íŠ¹ìˆ˜í‚¤ ëª…ì‹œì  ì§€ì›

## ðŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„

### Step 1: ìœ í‹¸ë¦¬í‹° íŒŒì¼ ì¶”ê°€
```bash
# ìƒˆë¡œìš´ ìœ í‹¸ë¦¬í‹° íŒŒì¼ ìƒì„±
src/utils/koreanIME.ts
```

### Step 2: ì»´í¬ë„ŒíŠ¸ êµì²´

#### TypingEngine.tsx ìˆ˜ì •
```tsx
// Before
import { InputHandler } from './InputHandler'

// After
import { InputHandlerV2 } from './InputHandlerV2'

// Component ë‚´ë¶€ì—ì„œë„ InputHandlerë¥¼ InputHandlerV2ë¡œ êµì²´
```

### Step 3: Store ì—…ë°ì´íŠ¸

#### í•„ìš”í•œ ê²½ìš° Store êµì²´
```tsx
// Before
import { useTypingStore } from '@/stores/typingStore'

// After (ì„±ëŠ¥ ê°œì„ ì´ í•„ìš”í•œ ê²½ìš°)
import { useTypingStoreV2 } from '@/stores/typingStoreV2'
```

### Step 4: ê¸°ì¡´ ì½”ë“œì—ì„œ ìžëª¨ ì²´í¬ ë¡œì§ êµì²´

```tsx
// Before - ì¤‘ë³µëœ ìžëª¨ ì²´í¬ ì½”ë“œ
const isKoreanJamo = (char: string) => {
  const code = char.charCodeAt(0)
  return (
    (code >= 0x3131 && code <= 0x314F) || 
    (code >= 0x1100 && code <= 0x11FF) || 
    (code >= 0x3130 && code <= 0x318F) || 
    (code >= 0xA960 && code <= 0xA97F)
  )
}

// After - ì¤‘ì•™í™”ëœ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©
import { isKoreanJamo } from '@/utils/koreanIME'
```

## ðŸ§ª í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í•œê¸€ ìž…ë ¥ ì‹œ ìžëª¨ê°€ ì¤‘ë³µ ì²˜ë¦¬ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
- [ ] ì˜ì–´ ìž…ë ¥ì´ ì •ìƒ ìž‘ë™í•˜ëŠ”ì§€ í™•ì¸
- [ ] ë°±ìŠ¤íŽ˜ì´ìŠ¤ê°€ ì˜¬ë°”ë¥´ê²Œ ìž‘ë™í•˜ëŠ”ì§€ í™•ì¸
- [ ] ì²« ë¬¸ìž ìž…ë ¥ ì‹œ ìžë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì‹œìž‘ë˜ëŠ”ì§€ í™•ì¸
- [ ] Space, Enter, Tab í‚¤ê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ í™•ì¸

### ë¸Œë¼ìš°ì €ë³„ í…ŒìŠ¤íŠ¸
- [ ] Chromeì—ì„œ í•œê¸€ ìž…ë ¥ í…ŒìŠ¤íŠ¸
- [ ] Firefoxì—ì„œ í•œê¸€ ìž…ë ¥ í…ŒìŠ¤íŠ¸
- [ ] Safariì—ì„œ í•œê¸€ ìž…ë ¥ í…ŒìŠ¤íŠ¸
- [ ] Edgeì—ì„œ í•œê¸€ ìž…ë ¥ í…ŒìŠ¤íŠ¸

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ë¹ ë¥¸ íƒ€ì´í•‘ ì‹œ ë¬¸ìž ëˆ„ë½ì´ ì—†ëŠ”ì§€ í™•ì¸
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì—†ëŠ”ì§€ í™•ì¸ (processedInputRef ì •ë¦¬)
- [ ] CPU ì‚¬ìš©ëŸ‰ì´ ê³¼ë„í•˜ì§€ ì•Šì€ì§€ í™•ì¸

## ðŸš¨ ì£¼ì˜ì‚¬í•­

1. **ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±**
   - ìƒˆë¡œìš´ Storeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ê¸°ì¡´ í†µê³„ ë°ì´í„°ì™€ í˜¸í™˜ë˜ëŠ”ì§€ í™•ì¸
   - localStorageì— ì €ìž¥ëœ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” ì—¬ë¶€ í™•ì¸

2. **ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬**
   - ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì •ë¦¬ë˜ëŠ”ì§€ í™•ì¸
   - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•´ íƒ€ì´ë¨¸ì™€ Set ê°ì²´ ì •ë¦¬ í™•ì¸

3. **íƒ€ìž… ì •ì˜ ì—…ë°ì´íŠ¸**
   - TypeScript íƒ€ìž… ì •ì˜ê°€ ìƒˆë¡œìš´ êµ¬ì¡°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
   - í•„ìš”í•œ ê²½ìš° `@/types/index.ts` ì—…ë°ì´íŠ¸

## ðŸ“Š ì„±ëŠ¥ ë¹„êµ

| í•­ëª© | ê¸°ì¡´ ë²„ì „ | ê°œì„  ë²„ì „ | ê°œì„ ìœ¨ |
|-----|---------|---------|-------|
| ìžëª¨ ì¤‘ë³µ ì²˜ë¦¬ | ë°œìƒ | í•´ê²° | 100% |
| ì½”ë“œ ì¤‘ë³µ | 4ê³³ | 1ê³³ | 75% ê°ì†Œ |
| í…ŒìŠ¤íŠ¸ ì‹œìž‘ ë°©ë²• | 1ê°€ì§€ | ìžë™ | UX ê°œì„  |
| ë¸Œë¼ìš°ì € í˜¸í™˜ì„± | ë¶€ë¶„ì  | ì™„ì „ | 100% |

## ðŸ”— ê´€ë ¨ íŒŒì¼

- `/src/utils/koreanIME.ts` - í•œê¸€ IME ìœ í‹¸ë¦¬í‹°
- `/src/components/core/InputHandlerV2.tsx` - ê°œì„ ëœ ìž…ë ¥ í•¸ë“¤ëŸ¬
- `/src/stores/typingStoreV2.ts` - ê°œì„ ëœ íƒ€ì´í•‘ ìŠ¤í† ì–´

## ðŸ’¡ ì¶”ê°€ ê°œì„  ì œì•ˆ

1. **ì›¹ ì›Œì»¤ í™œìš©**: í†µê³„ ê³„ì‚°ì„ ì›¹ ì›Œì»¤ë¡œ ì´ë™í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œ ë¶€í•˜ ê°ì†Œ
2. **ë””ë°”ìš´ì‹± ì¶”ê°€**: ì—°ì† ìž…ë ¥ ì‹œ ê³¼ë„í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ì§€
3. **ì—ëŸ¬ ë°”ìš´ë”ë¦¬**: IME ê´€ë ¨ ì—ëŸ¬ ë°œìƒ ì‹œ graceful degradation
4. **í…”ë ˆë©”íŠ¸ë¦¬**: ì‚¬ìš©ìžë³„ IME ì‚¬ìš© íŒ¨í„´ ë¶„ì„ì„ ìœ„í•œ ìµëª… ë°ì´í„° ìˆ˜ì§‘